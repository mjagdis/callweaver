#
# OpenPBX -- A telephony toolkit for Linux.
# 
# Makefile for PBX modules
#
# Copyright (C) 1999-2005, Mark Spencer
#
# Mark Spencer <markster@digium.com>
#
# This program is free software, distributed under the terms of
# the GNU General Public License
#

PBX_LIBS=pbx_config.so pbx_spool.so pbx_dundi.so pbx_loopback.so 

CFLAGS+=-fPIC


all: depend $(PBX_LIBS)

clean:
	rm -f *.so *.o .depend

pbx_dundi.so: dundi-parser.o pbx_dundi.o
	$(CC) $(SOLINK) -o $@ pbx_dundi.o dundi-parser.o -lz


%.so : %.o
	$(CC) $(SOLINK) -o $@ $<

ifneq ($(wildcard .depend),)
  include .depend
endif

install: all
	for x in $(PBX_LIBS); do $(INSTALL) -m 755 $$x $(DESTDIR)$(MODULES_DIR) ; done

depend: .depend

.depend:
	../build_tools/mkdep $(CFLAGS) `ls *.c`
